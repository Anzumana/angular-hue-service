/*! angular-hue-service 07-12-2014 */
angular.module("hue",[]).service("hue",["$http","$q",function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;i="newdeveloper",c="",d="",g=!1,e=!0,h=function(){var a;return a=b.defer(),g?a.resolve():f().then(function(b){return d=b[0].internalipaddress,c="http://"+d+"/api/"+i,g=!0,a.resolve()}),a.promise},m=function(c,d,f){var g;return g=b.defer(),a.put(d,f).success(function(a){return n(c,a,g)}).error(function(a){return e&&console.log("Error: "+c,a),g.reject}),g.promise},l=function(c,d,f){var g;return g=b.defer(),a.post(d,f).success(function(a){return n(c,a,g)}).error(function(a){return e&&console.log("Error: "+c,a),g.reject}),g.promise},j=function(c,d){var f;return f=b.defer(),a["delete"](d).success(function(a){return n(c,a,f)}).error(function(a){return e&&console.log("Error: "+c,a),f.reject}),f.promise},k=function(c,d){var f;return f=b.defer(),a.get(d).success(function(a){return n(c,a,f)}).error(function(a){return e&&console.log("Error: "+c,a),f.reject}),f.promise},n=function(a,b,c){return null!=b[0]&&b[0].error?(e&&console.log("Error: "+a,b),c.reject):(e&&console.log("Debug: "+a,b),c.resolve(b))},f=function(){return k("getBridgeNupnp","https://www.meethue.com/api/nupnp")},this.getBridgeIP=function(){return h().then(function(){return d})},this.getLights=function(){return h().then(function(){return k("getLights",""+c+"/lights")})},this.getNewLights=function(){return h().then(function(){return k("getNewLights",""+c+"/lights/new")})},this.searchNewLights=function(){return h().then(function(){return l("searchNewLights",""+c+"/lights",{})})},this.getLight=function(a){return h().then(function(){return k("getLight",""+c+"/lights/"+a)})},this.setLightName=function(a,b){return h().then(function(){var d;return d={name:b},m("setLightName",""+c+"/lights/"+a,d)})},this.setLightState=function(a,b){return h().then(function(){return m("setLightState",""+c+"/lights/"+a+"/state",b)})},this.getConfiguration=function(){return h().then(function(){return k("getConfiguration",""+c+"/config")})},this.setConfiguration=function(a){return h().then(function(){return m("setConfiguration",""+c+"/config",a)})},this.createUser=function(a,b){return null==b&&(b=!1),h().then(function(){var c;return c={devicetype:a},b&&(c.username=b),l("createUser","http://"+d+"/api",c)})},this.deleteUser=function(a){return h().then(function(){return j("deleteUser",""+c+"/config/whitelist/"+a)})},this.getFullState=function(){return h().then(function(){return k("getFullState",c)})},this.getGroups=function(){return h().then(function(){return k("getGroups",""+c+"/groups")})},this.createGroup=function(a,b){return h().then(function(){var d;return d={lights:b,name:a},e&&console.log("Debug: createGroup body",d),l("createGroup",""+c+"/groups",d)})},this.getGroupAttributes=function(a){return h().then(function(){return k("getGroupAttributes",""+c+"/groups/"+a)})},this.setGroupAttributes=function(a,b,d){return h().then(function(){var e;return e={lights:d,name:b},m("setGroupAttributes",""+c+"/groups/"+a,e)})},this.setGroupState=function(a,b){return h().then(function(){return m("setGroupState",""+c+"/groups/"+a+"/action",b)})},this.deleteGroup=function(a){return h().then(function(){return j("deleteUser",""+c+"/groups/"+a)})},this.getRules=function(){return h().then(function(){return k("getRules",""+c+"/rules")})},this.getRule=function(a){return h().then(function(){return k("getRule",""+c+"/rules/"+a)})},this.createRule=function(a,b,d){return h().then(function(){var e;return e={name:a,conditions:b,actions:d},l("createRule",""+c+"/rules",e)})},this.updateRule=function(a,b,d,f){return null==b&&(b=!1),null==d&&(d=!1),null==f&&(f=!1),h().then(function(){var a;return a={},b&&(a.name=b),d&&(a.conditions=d),f&&(a.actions=f),e&&console.log("Debug: updateRule body",a),m("updateRule",""+c+"/rules",a)})},this.deleteRule=function(a){return h().then(function(){return j("deleteRule",""+c+"/rules/"+a)})},this.getSchedules=function(){return h().then(function(){return k("getSchedules",""+c+"/schedules")})},this.createSchedule=function(a,b,d,e,f,g){return null==a&&(a="schedule"),null==b&&(b=""),null==f&&(f="enabled"),null==g&&(g=!1),h().then(function(){var h;return h={name:a,description:b,command:d,time:e,status:f,autodelete:g},l("createSchedule",""+c+"/schedules",h)})},this.getScheduleAttributes=function(a){return h().then(function(){return k("getScheduleAttributes",""+c+"/schedules/"+a)})},this.setScheduleAttributes=function(a,b,d,e,f,g,i){return null==b&&(b=null),null==d&&(d=null),null==e&&(e=null),null==f&&(f=null),null==g&&(g=null),null==i&&(i=null),h().then(function(){var f;return f={},b&&(f.name=b),d&&(f.description=d),e&&(f.command=e),g&&(f.status=g),null!==i&&(f.autodelete=i),m("setScheduleAttributes",""+c+"/schedules/"+a,f)})},this.deleteSchedule=function(a){return h().then(function(){return j("deleteSchedule",""+c+"/schedules/"+a)})},this.getScenes=function(){return h().then(function(){return k("getScenes",""+c+"/scenes")})},this.createScene=function(a,b,d){return h().then(function(){var e;return e={name:b,lights:d},m("createScene",""+c+"/scenes/"+a,e)})},this.updateScene=function(a,b,d){return h().then(function(){return m("updateScene",""+c+"/scenes/"+a+"/lights/"+b+"/state",d)})},this.getSensors=function(){return h().then(function(){return k("getSensors",""+c+"/sensors")})},this.createSensor=function(a,b,d,e,f,g,i,j){return null==i&&(i=null),null==j&&(j=null),h().then(function(){var h;return h={name:a,modelid:b,swversion:d,type:e,uniqueid:f,manufacturername:g},i&&(h.state=i),j&&(h.config=j),l("createSensor",""+c+"/sensors",h)})},this.searchNewSensors=function(){return h().then(function(){return l("searchNewSensors",""+c+"/sensors",null)})},this.getNewSensors=function(){return h().then(function(){return k("getNewSensors",""+c+"/sensors/new")})},this.getSensor=function(a){return h().then(function(){return k("getSensor",""+c+"/sensors/"+a)})},this.renameSensor=function(a,b){return h().then(function(){var d;return d={name:b},m("renameSensor",""+c+"/sensors/"+a,d)})},this.updateSensor=function(a,b){return h().then(function(){return m("updateSensor",""+c+"/sensors/"+a+"/config",b)})},this.setSensorState=function(a,b){return h().then(function(){return m("setSensorState",""+c+"/sensors/"+a+"/state",b)})},this.getTimezones=function(){return h().then(function(){return k("getTimezones",""+c+"/info/timezones")})}}]);